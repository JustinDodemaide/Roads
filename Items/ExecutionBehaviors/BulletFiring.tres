[gd_resource type="Resource" load_steps=2 format=3 uid="uid://80d1lx66qmwq"]

[sub_resource type="GDScript" id="GDScript_wwlml"]
script/source = "extends UtilityExecutionBehavior

@export var muzzle_flash_color:Color = Color.ORANGE
@export var bullet_light_color:Color = Color.ORANGE

func execute(utility:Item,actor:Unit,_selection_info:Dictionary) -> void:
	var bullet = load(\"res://Mission/MissionObjects/Bullet_Generic/Bullet.tscn\").instantiate()
	if randi_range(0,100) > _selection_info[\"percent\"]:
		# Miss
		var pos = get_miss_position(_selection_info[\"target\"].position)
		bullet.init(utility,actor,pos)
	else:
		bullet.init(utility,actor,_selection_info[\"target\"])
	emit_signal(\"complete\")

func get_miss_position(target:Vector2) -> Vector2:
	var x = target.x + randi_range(-100,100)
	var y = target.y + randi_range(-100,100)
	return Vector2(x,y)
"

[resource]
script = SubResource("GDScript_wwlml")
muzzle_flash_color = Color(1, 0.647059, 0, 1)
bullet_light_color = Color(1, 0.647059, 0, 1)
